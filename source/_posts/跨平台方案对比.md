---
title: 跨平台方案对比
date: 2022-12-08 10:18:36
tags:
  - GUI
  - 文章
categories:
---

## 跨平台GUI三种策略

**API 映射**：API 映射是说，界面库使用同一套  API，将其映射到不同的底层平台上面。大体相当于将不同平台的 API 提取公共部分。比如说，将 Windows 平台上的按钮控件和 Mac OS 上的按钮组件都取名为 Button。当你使用 Button 时，如果在 Windows 平台上，则编译成按钮控件；如果在 Mac OS  上，则编译成按钮组件。这么做的好处是，所有组件都是原始平台自有的，外观和原生平台一致；缺点是，**编写库代码的时候需要大量工作用于适配不同平台，并且，只能提取相同部分的 API**。比如 Mac OS 的文本框自带拼写检测，但是 Windows 上面没有，则不能提供该功能。这种策略的典型代表是  **wxWidgets**。这也是一个标准的 C++ 库，和 Qt 一样庞大。它的语法看上去和 MFC 类似，有大量的宏。据说，一个 MFC  程序员可以很容易的转换到 wxWidgets 上面来。

**API 模拟**：前面提到，API  映射会“缺失”不同平台的特定功能，而 API 模拟则是解决这一问题。不同平台的有差异  API，将使用工具库自己的代码用于模拟出来。按照前面的例子，Mac OS 上的文本框有拼写检测，但是 Windows  的没有。那么，工具库自己提供一个拼写检测算法，让 Windows 的文本框也有相同的功能。API 模拟的典型代表是 wine —— 一个  Linux 上面的 Windows 模拟器。它将大部分 Win32 API 在 Linux 上面模拟了出来，让 Linux 可以通过 wine  运行 Windows 程序。由此可以看出，API 模拟最大优点是，应用程序无需重新编译，即可运行到特定平台上。另外一个例子是微软提供的  DirectX，这个开发库将屏蔽掉不同显卡硬件所提供的具体功能。使用这个库，你无需担心硬件之间的差异，如果有的显卡没有提供该种功能，SDK  会使用软件的方式加以实现。*（关于举例，可以参考文末一段精彩的讨论。）*

**GUI 模拟**：任何平台都提供了图形绘制函数，例如画点、画线、画面等。有些工具库利用这些基本函数，在不同绘制出自己的组件，这就是 GUI 模拟。GUI  模拟的工作量无疑是很大的，因为需要使用最基本的绘图函数将所有组件画出来；并且这种绘制很难保证和原生组件一模一样。但是，这一代价带来的优势是，可以很方便的修改组件的外观——只要修改组件绘制函数即可。很多跨平台的 GUI 库都是使用的这种策略，例如 **gtk**+（这是一个 C 语言的图形界面库。使用 C  语言很优雅地实现了面向对象程序设计。**不过，这也同样带来了一个问题——使用大量的类型转换的宏来模拟多态，并且它的函数名一般都比较长，使用下划线分割单词，看上去和 Linux 如出一辙**。gtk+ 并不是模拟的原生界面，而有它自己的风格，所以有时候就会和操作系统的界面格格不入。），Swing 以及我们的  Qt。

Qt 和 wxWidgets 一样，也是一个标准的 C++ 库。但是它的语法类似于 Java 的  Swing，十分清晰，而且使用信号槽（signal/slot）机制，让程序看起来很明白——这也是很多人优先选择 Qt  的一个很重要的原因。不过，所谓“成也萧何，败也萧何”。这种机制虽然很清楚，但是它所带来的后果是你需要使用 Qt 的 moc  对程序进行预处理，才能够再使用标准的 make 或者 nmake 进行正常的编译，并且信号槽的调用要比普通的函数调用慢大约一个数量级（Qt 4  文档中说明该数据，但 Qt 5 尚未有官方说明）。Qt 的界面也不是原生风格的，尽管 Qt 使用 style  机制十分巧妙地模拟了原生界面。另外值得一提的是，Qt 不仅仅能够运行在桌面环境中，还可以运行在嵌入式平台以及手机平台。

## 参考

1. [Flutter技术架构概览](https://zhuanlan.zhihu.com/p/339247898)
2. [浅谈几种跨平台方案](https://zhuanlan.zhihu.com/p/148820818)
3. [跨平台技术方案浅析](https://juejin.cn/post/7104696657983307812)
4. [写给前端的跨平台方案、跨端引擎的本质](https://zhuanlan.zhihu.com/p/375574018)
5. [Rust跨平台探索：前端中的后端](https://juejin.cn/post/6970951874245558286)
6. [跨平台 GUI 三种策略](https://www.bookstack.cn/read/qt-study-road-2/b173882cafb6bb28.md)
7. [客户端开发GUI框架对比与技术选型总结](https://blog.csdn.net/HW140701/article/details/118003911)
8. [漫谈windows桌面客户端的UI框架](https://xylt.github.io/windows-ui/)
9. [MAUI](https://toutiao.io/posts/p077n75/preview)
10. [浅谈基于Web的跨平台桌面应用开发](https://juejin.cn/post/7154348142350041101)